{"remainingRequest":"/Users/thomasleydet/Documents/Cours/Dev Front/TpDataVisualizer/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/thomasleydet/Documents/Cours/Dev Front/TpDataVisualizer/src/components/PieChart.vue?vue&type=style&index=0&id=63fb763c&scoped=true&lang=css","dependencies":[{"path":"/Users/thomasleydet/Documents/Cours/Dev Front/TpDataVisualizer/src/components/PieChart.vue","mtime":1620055758220},{"path":"/Users/thomasleydet/Documents/Cours/Dev Front/TpDataVisualizer/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/thomasleydet/Documents/Cours/Dev Front/TpDataVisualizer/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1616796459000},{"path":"/Users/thomasleydet/Documents/Cours/Dev Front/TpDataVisualizer/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/thomasleydet/Documents/Cours/Dev Front/TpDataVisualizer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/thomasleydet/Documents/Cours/Dev Front/TpDataVisualizer/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgLnBpZS1jb250YWluZXIgewogICAgaGVpZ2h0OiAxNTBweDsKICAgIHdpZHRoOiAzMDBweDsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIGRpc3BsYXk6IGJsb2NrOwogIH0KCiAgLnBpZS1iYWNrZ3JvdW5kIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHdpZHRoOiAxNTBweDsKICAgIGhlaWdodDogMTUwcHg7CiAgICBib3JkZXItcmFkaXVzOiAxMDAlOwogICAgYm94LXNoYWRvdzogMHB4IDBweCA4cHggcmdiYSgwLDAsMCwwLjUpOwogIH0KCiAgLnBpZSB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB3aWR0aDogMTUwcHg7CiAgICBoZWlnaHQ6IDE1MHB4OwogICAgYm9yZGVyLXJhZGl1czogMTAwJTsKICAgIGNsaXA6IHJlY3QoMHB4LCA3NXB4LCAxNTBweCwgMHB4KTsKICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvOwogICAgY3Vyc29yOnBvaW50ZXI7CiAgfQoKICAuaG9sZCB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB3aWR0aDogMTUwcHg7CiAgICBoZWlnaHQ6IDE1MHB4OwogICAgYm9yZGVyLXJhZGl1czogMTAwJTsKICAgIGNsaXA6IHJlY3QoMHB4LCAxNTBweCwgMTUwcHgsIDc1cHgpOwogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgfQoKCiAgLmlubmVyLWNpcmNsZSB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB3aWR0aDogODBweDsKICAgIGhlaWdodDogODBweDsKICAgIGJhY2tncm91bmQtY29sb3I6ICM0NDQ7CiAgICBib3JkZXItcmFkaXVzOiAxMDAlOwogICAgdG9wOiAzNXB4OwogICAgbGVmdDogMzVweDsKICAgIGJveC1zaGFkb3c6IDBweCAwcHggOHB4IHJnYmEoMCwwLDAsMC41KSBpbnNldDsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIHotaW5kZXg6MTsKICB9CiAgLmlubmVyLWNpcmNsZSAuY29udGVudCB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIHdpZHRoOiA4MHB4OwogICAgdG9wOiAzMHB4OwogICAgbGVmdDogMDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIHotaW5kZXg6OTsKICB9Cg=="},{"version":3,"sources":["/Users/thomasleydet/Documents/Cours/Dev Front/TpDataVisualizer/src/components/PieChart.vue"],"names":[],"mappings":"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","file":"/Users/thomasleydet/Documents/Cours/Dev Front/TpDataVisualizer/src/components/PieChart.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"pie-container\">\n    <Legend :keys=\"keys\" :colors=\"colors\" @updateFilterFromLegend=\"$emit('updateFilter', {col:col, value:$event})\"/>\n    <div class=\"pie-background\"></div>\n    <template v-for=\"(slice, index) in aggregatedData\" :key=\"slice.key\">\n      <div :style=\"styleForSlice(slice, index)\" class=\"hold\" @click=\"$emit('updateFilter', {col:col, value:slice.key})\" :title=\"slice.key + ': ' + slice.value\">\n        <div class=\"pie\" :style=\"styleForInnerSlice(slice, index)\"></div>\n      </div>\n      <div v-if=\"over50(slice)\" :style=\"styleForSlice(slice, index, true)\" class=\"hold\" @click=\"$emit('updateFilter', {col:col, value:slice.key})\" :title=\"slice.key + ': ' + slice.value\">\n        <div class=\"pie\" :style=\"styleForInnerSlice(slice, index, true)\"></div>\n      </div>\n    </template>\n    <div class=\"inner-circle\"><div class=\"content\"><b>{{col.label}}</b></div></div>\n  </div>\n</template>\n\n<script>\n\n  import Tools from '@/services/Tools';\n\n  import ColorsMixin from '@/mixins/Colors.mixin';\n  import Legend from '@/components/charts/Legend';\n\n  export default {\n    name: 'PieChart',\n    components: {Legend},\n    mixins: [ColorsMixin()],\n    props: {\n      rows: Array,\n      col: Object,\n    },\n    emits: ['updateFilter'],\n    computed: {\n      // Group data by key\n      aggregatedData() {\n        return Object.entries(\n          this.rows\n            .reduce((acc, row)=>{\n              const value = Tools.findValueAtPath(row, this.col.path);\n              return {...acc, [value]: acc[value] ? acc[value]+1 : 1};\n            }, {}),\n        ).map((a)=>({key: a[0], value: a[1]}));\n      },\n      // List all keys\n      keys() {\n        return this.aggregatedData.map((d)=>d.key);\n      },\n      // Number of groups\n      datasetsNumber() {\n        return this.aggregatedData.length;\n      },\n    },\n    methods: {\n      // Generate the style object for each slice\n      styleForSlice(slice, index, secondHalf) {\n        const range = (slice.value / this.rows.length * 360);\n        const start = this.aggregatedData.slice(0, index).reduce((acc, slice)=>acc+(slice.value / this.rows.length * 360), 0) + ( secondHalf ? range-180 : 0);\n        return {\n          'transform': 'rotate('+start+'deg)',\n        };\n      },\n      // Generate the style object for each inner slice\n      styleForInnerSlice(slice, index) {\n        const range = Math.min(180, (slice.value / this.rows.length * 360));\n        return {\n          'background-color': this.colors[index],\n          'transform': 'rotate('+range+'deg)',\n        };\n      },\n      // Check if the slice is more than 50%\n      over50(slice) {\n        const isOver50 = (slice.value / this.rows.length ) > 0.5;\n        return isOver50;\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  .pie-container {\n    height: 150px;\n    width: 300px;\n    position: relative;\n    display: block;\n  }\n\n  .pie-background {\n    position: absolute;\n    width: 150px;\n    height: 150px;\n    border-radius: 100%;\n    box-shadow: 0px 0px 8px rgba(0,0,0,0.5);\n  }\n\n  .pie {\n    position: absolute;\n    width: 150px;\n    height: 150px;\n    border-radius: 100%;\n    clip: rect(0px, 75px, 150px, 0px);\n    pointer-events: auto;\n    cursor:pointer;\n  }\n\n  .hold {\n    position: absolute;\n    width: 150px;\n    height: 150px;\n    border-radius: 100%;\n    clip: rect(0px, 150px, 150px, 75px);\n    pointer-events: none;\n  }\n\n\n  .inner-circle {\n    position: absolute;\n    width: 80px;\n    height: 80px;\n    background-color: #444;\n    border-radius: 100%;\n    top: 35px;\n    left: 35px;\n    box-shadow: 0px 0px 8px rgba(0,0,0,0.5) inset;\n    color: white;\n    z-index:1;\n  }\n  .inner-circle .content {\n    position: absolute;\n    display: block;\n    width: 80px;\n    top: 30px;\n    left: 0;\n    text-align: center;\n    font-size: 14px;\n    z-index:9;\n  }\n</style>\n"]}]}